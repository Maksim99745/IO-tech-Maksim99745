# Исправление ошибки 400 в Strapi v5

## Проблема:

Ошибка изменилась с **401** на **400 Bad Request**. Это означает, что:
- ✅ Permissions работают (не 401)
- ❌ Формат запроса неправильный для Strapi v5

---

## Возможные причины:

1. **Поле `locale` не существует** в коллекциях
2. **Формат фильтров изменился** в Strapi v5
3. **Параметр `populate`** требует другого формата

---

## Решение 1: Убрать фильтр locale (временно)

Если поле `locale` еще не заполнено или не используется, попробуйте запросы без фильтра:

```bash
curl http://localhost:1337/api/services?populate=*
```

---

## Решение 2: Проверить структуру коллекций

Убедитесь, что поле `locale` действительно существует в коллекциях:
- Откройте Strapi Admin
- Проверьте структуру каждой коллекции
- Убедитесь, что поле `locale` есть и заполнено

---

## Решение 3: Использовать упрощенные запросы

Я обновил код - теперь фильтр `locale` добавляется только если указан, и запросы должны работать даже без него.

---

## Проверка:

1. **Попробуйте простой запрос:**
   ```bash
   curl http://localhost:1337/api/services
   ```

2. **С populate:**
   ```bash
   curl "http://localhost:1337/api/services?populate=*"
   ```

3. **В браузере:**
   - http://localhost:1337/api/services
   - http://localhost:1337/api/services?populate=*

Если простой запрос работает - проблема в фильтрах.
Если не работает - проблема в permissions или структуре коллекций.

---

## Что я исправил:

- Убрал обязательный фильтр `locale` (теперь он опциональный)
- Улучшил обработку ошибок с логированием
- Добавил проверки на существование данных

Обновите страницу и проверьте снова!
